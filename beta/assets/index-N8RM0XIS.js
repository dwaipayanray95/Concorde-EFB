function i(s,e,n,t){if(typeof e=="function"?s!==e||!t:!e.has(s))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?t:n==="a"?t.call(s):t?t.value:e.get(s)}function o(s,e,n,t,l){if(typeof e=="function"?s!==e||!0:!e.has(s))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(s,n),n}var a,r,d,c,u;const f="__TAURI_TO_IPC_KEY__";function g(s,e=!1){return window.__TAURI_INTERNALS__.transformCallback(s,e)}class w{constructor(e){a.set(this,void 0),r.set(this,0),d.set(this,[]),c.set(this,void 0),o(this,a,e||(()=>{})),this.id=g(n=>{const t=n.index;if("end"in n){t==i(this,r,"f")?this.cleanupCallback():o(this,c,t);return}const l=n.message;if(t==i(this,r,"f")){for(i(this,a,"f").call(this,l),o(this,r,i(this,r,"f")+1);i(this,r,"f")in i(this,d,"f");){const y=i(this,d,"f")[i(this,r,"f")];i(this,a,"f").call(this,y),delete i(this,d,"f")[i(this,r,"f")],o(this,r,i(this,r,"f")+1)}i(this,r,"f")===i(this,c,"f")&&this.cleanupCallback()}else i(this,d,"f")[t]=l})}cleanupCallback(){window.__TAURI_INTERNALS__.unregisterCallback(this.id)}set onmessage(e){o(this,a,e)}get onmessage(){return i(this,a,"f")}[(a=new WeakMap,r=new WeakMap,d=new WeakMap,c=new WeakMap,f)](){return`__CHANNEL__:${this.id}`}toJSON(){return this[f]()}}async function h(s,e={},n){return window.__TAURI_INTERNALS__.invoke(s,e,n)}class p{get rid(){return i(this,u,"f")}constructor(e){u.set(this,void 0),o(this,u,e)}async close(){return h("plugin:resources|close",{rid:this.rid})}}u=new WeakMap;class C extends p{constructor(e){super(e.rid),this.available=!0,this.currentVersion=e.currentVersion,this.version=e.version,this.date=e.date,this.body=e.body,this.rawJson=e.rawJson}async download(e,n){_(n);const t=new w;e&&(t.onmessage=e);const l=await h("plugin:updater|download",{onEvent:t,rid:this.rid,...n});this.downloadedBytes=new p(l)}async install(){if(!this.downloadedBytes)throw new Error("Update.install called before Update.download");await h("plugin:updater|install",{updateRid:this.rid,bytesRid:this.downloadedBytes.rid}),this.downloadedBytes=void 0}async downloadAndInstall(e,n){_(n);const t=new w;e&&(t.onmessage=e),await h("plugin:updater|download_and_install",{onEvent:t,rid:this.rid,...n})}async close(){var e;await((e=this.downloadedBytes)==null?void 0:e.close()),await super.close()}}async function b(s){_(s);const e=await h("plugin:updater|check",{...s});return e?new C(e):null}function _(s){s!=null&&s.headers&&(s.headers=Array.from(new Headers(s.headers).entries()))}export{C as Update,b as check};
//# sourceMappingURL=index-N8RM0XIS.js.map
